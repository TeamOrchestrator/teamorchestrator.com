---
import Card from '../../../components/Card.astro';
import Layout from '../../../layouts/Layout.astro';
import { getPublishedPosts, getTagSummary } from '../../../lib/content';

const posts = await getPublishedPosts();
const tags = getTagSummary(posts);
---

<Layout title="Blog Tags | Team Orchestrator" description="Browse blog posts by tag.">
  <section class="page-header">
    <div class="container">
      <p class="eyebrow">Blog</p>
      <h1>Tags</h1>
      <p class="lead">Browse mission reports by topic.</p>
    </div>
  </section>

  <section class="section">
    <div class="container">
      <Card as="ul" class="link-list">
        {tags.map((tag) => (
          <li>
            <a
              href={`/blog/tags/${tag.slug}/`}
              data-analytics-event="blog_tag_click"
              data-analytics-category="blog"
              data-analytics-label={tag.slug}
              data-analytics-location="blog_tags_index"
            >
              {tag.tag}
            </a>
            <span class="meta"> ({tag.count})</span>
          </li>
        ))}
      </Card>
    </div>
  </section>
</Layout>
