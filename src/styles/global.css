@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply box-border;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    @apply m-0 bg-mission-bg font-sans text-mission-text leading-relaxed;
    background-image:
      radial-gradient(ellipse 80% 50% at 50% -20%, rgb(91 176 255 / 0.18), transparent),
      radial-gradient(ellipse 60% 40% at 100% 0%, rgb(44 142 255 / 0.12), transparent),
      radial-gradient(ellipse 40% 60% at 0% 60%, rgb(91 176 255 / 0.06), transparent);
  }

  a {
    @apply text-brand transition-colors duration-200;
  }

  a:hover {
    @apply text-brand-strong;
  }

  h1,
  h2,
  h3 {
    margin: 0 0 0.65rem;
    line-height: 1.15;
    letter-spacing: -0.02em;
  }

  h1 {
    font-size: clamp(2.2rem, 5vw, 3.6rem);
    font-weight: 700;
  }

  h2 {
    font-size: clamp(1.5rem, 3vw, 2.2rem);
    font-weight: 700;
  }

  h3 {
    font-weight: 600;
  }

  code {
    @apply rounded-lg border border-mission-border bg-mission-code px-1.5 py-[0.08rem] font-mono text-[0.92em];
  }

  pre {
    @apply overflow-x-auto rounded-[10px] border border-mission-border bg-mission-code p-[0.9rem] font-mono;
  }

  pre code {
    @apply border-0 bg-transparent p-0;
  }

  ::selection {
    background: rgb(91 176 255 / 0.3);
    color: #fff;
  }
}

@layer components {
  .container {
    @apply mx-auto w-[min(1120px,92vw)];
  }

  /* ── Header ────────────────────────────────────────────── */

  .site-header {
    @apply sticky top-0 z-20 border-b border-white/[0.06] backdrop-blur-2xl;
    background: linear-gradient(180deg, rgb(8 19 37 / 0.92), rgb(8 19 37 / 0.78));
    box-shadow:
      0 1px 0 rgb(91 176 255 / 0.06),
      0 12px 40px rgb(4 12 24 / 0.4);
  }

  .header-inner {
    @apply flex min-h-[72px] items-center justify-between;
  }

  .brand {
    @apply flex items-center gap-3 text-mission-text no-underline font-bold tracking-[0.01em] text-[1.05rem];
    transition: opacity 0.2s;
  }

  .brand:hover {
    opacity: 0.85;
  }

  .brand-mark {
    @apply rounded-full border border-brand/30 px-2.5 py-1 text-[0.65rem] font-semibold tracking-[0.14em] text-brand;
    background: linear-gradient(135deg, rgb(91 176 255 / 0.12), rgb(44 142 255 / 0.06));
    box-shadow: 0 0 12px rgb(91 176 255 / 0.1);
  }

  .nav-list {
    @apply m-0 flex list-none gap-1 p-0;
  }

  .nav-list a {
    @apply relative rounded-lg px-3 py-1.5 text-[0.9rem] text-mission-muted no-underline transition-all duration-200;
  }

  .nav-list a::after {
    content: '';
    @apply absolute bottom-0 left-1/2 h-[2px] w-0 -translate-x-1/2 rounded-full bg-brand transition-all duration-300;
  }

  .nav-list a:hover {
    @apply text-mission-text;
  }

  .nav-list a:hover::after {
    @apply w-[60%];
  }

  .nav-list a.active {
    @apply text-mission-text;
  }

  .nav-list a.active::after {
    @apply w-[60%];
  }

  /* ── Sections ──────────────────────────────────────────── */

  .section {
    @apply relative overflow-hidden py-16;
  }

  .section::before {
    content: '';
    @apply pointer-events-none absolute inset-0 opacity-[0.12];
    background-image:
      linear-gradient(rgb(91 176 255 / 0.12) 1px, transparent 1px),
      linear-gradient(90deg, rgb(91 176 255 / 0.08) 1px, transparent 1px);
    background-size: 48px 48px;
    mask-image: radial-gradient(ellipse 80% 70% at 50% 50%, black 20%, transparent 70%);
  }

  .section-tight {
    @apply pb-12 pt-20;
  }

  .section.alt {
    @apply border-y border-mission-border/60 bg-mission-bg-alt;
  }

  .section.alt::after {
    content: '';
    @apply pointer-events-none absolute inset-0;
    background: radial-gradient(ellipse 50% 60% at 70% 20%, rgb(44 142 255 / 0.05), transparent);
  }

  /* ── Hero ───────────────────────────────────────────────── */

  .hero-grid {
    @apply grid grid-cols-1 items-start gap-10 lg:grid-cols-[minmax(0,1fr)_auto];
  }

  .hero-grid.hero-grid-stacked {
    grid-template-columns: minmax(0, 1fr);
  }

  .hero-grid.hero-grid-stacked .terminal-shell {
    justify-self: stretch;
    margin-top: 1rem;
  }

  .eyebrow {
    @apply mb-3 inline-flex items-center gap-2 rounded-full border border-brand/20 bg-brand/[0.07] px-3.5 py-1 text-[0.72rem] font-semibold uppercase tracking-[0.1em] text-brand;
    box-shadow: 0 0 20px rgb(91 176 255 / 0.08);
  }

  .eyebrow::before {
    content: '';
    @apply inline-block h-1.5 w-1.5 rounded-full bg-brand;
    box-shadow: 0 0 6px rgb(91 176 255 / 0.6);
    animation: pulse-dot 2s ease-in-out infinite;
  }

  .hero-headline {
    background: linear-gradient(135deg, #ffffff 0%, #e7edf7 40%, #5bb0ff 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .lead {
    @apply max-w-[62ch] text-[1.12rem] leading-relaxed text-mission-muted;
  }

  .lead.compact {
    @apply mt-0;
  }

  .cta-row {
    @apply mt-8 flex flex-wrap gap-4;
  }

  /* ── Buttons ───────────────────────────────────────────── */

  .button {
    @apply relative inline-flex items-center justify-center overflow-hidden rounded-xl border border-transparent px-5 py-3 font-semibold no-underline transition-all duration-300;
  }

  .button.primary {
    @apply border-brand-strong bg-brand-strong text-white;
    box-shadow:
      0 0 20px rgb(44 142 255 / 0.3),
      0 8px 24px rgb(44 142 255 / 0.2),
      inset 0 1px 0 rgb(255 255 255 / 0.15);
  }

  .button.primary:hover {
    @apply -translate-y-0.5 bg-brand;
    box-shadow:
      0 0 30px rgb(44 142 255 / 0.4),
      0 12px 32px rgb(44 142 255 / 0.3),
      inset 0 1px 0 rgb(255 255 255 / 0.2);
  }

  .button.primary::after {
    content: '';
    @apply pointer-events-none absolute inset-0;
    background: linear-gradient(135deg, rgb(255 255 255 / 0.2) 0%, transparent 50%);
  }

  .button.secondary {
    @apply border-mission-border bg-mission-panel/40 text-mission-text backdrop-blur-sm;
    box-shadow: inset 0 1px 0 rgb(255 255 255 / 0.04);
  }

  .button.secondary:hover {
    @apply -translate-y-0.5 border-brand/40 bg-mission-panel/60;
    box-shadow:
      0 0 16px rgb(91 176 255 / 0.1),
      inset 0 1px 0 rgb(255 255 255 / 0.06);
  }

  /* ── Cards ─────────────────────────────────────────────── */

  .card {
    @apply relative rounded-2xl border border-white/[0.07] p-6 backdrop-blur-sm transition-all duration-300;
    background: linear-gradient(135deg, rgb(21 39 69 / 0.8), rgb(21 39 69 / 0.5));
    box-shadow:
      inset 0 1px 0 rgb(255 255 255 / 0.05),
      0 4px 24px rgb(4 12 24 / 0.2);
  }

  .card::before {
    content: '';
    @apply pointer-events-none absolute inset-0 rounded-2xl opacity-0 transition-opacity duration-300;
    background: radial-gradient(600px circle at var(--mouse-x, 50%) var(--mouse-y, 50%), rgb(91 176 255 / 0.06), transparent 40%);
  }

  .card:hover {
    @apply border-brand/20;
    box-shadow:
      inset 0 1px 0 rgb(255 255 255 / 0.06),
      0 8px 40px rgb(4 12 24 / 0.35),
      0 0 30px rgb(91 176 255 / 0.05);
    transform: translateY(-2px);
  }

  .card:hover::before {
    @apply opacity-100;
  }

  .card-elevated {
    box-shadow:
      0 20px 60px rgb(4 12 24 / 0.4),
      0 0 40px rgb(91 176 255 / 0.04);
  }

  /* ── Terminal ──────────────────────────────────────────── */

  .terminal-shell {
    @apply flex min-w-0 w-full flex-col gap-3 lg:h-[380px] lg:justify-self-end;
    inline-size: min(100%, calc((var(--terminal-max-ch, 88) * 0.7rem) + 2.4rem));
  }

  .terminal-header {
    @apply flex items-center gap-3;
  }

  .terminal-lights {
    @apply flex gap-2;
  }

  .terminal-light {
    @apply h-3 w-3 rounded-full;
    box-shadow: inset 0 -1px 2px rgb(0 0 0 / 0.2);
  }

  .terminal-light-red {
    @apply bg-[#ff6b6b];
    box-shadow: 0 0 6px rgb(255 107 107 / 0.3), inset 0 -1px 2px rgb(0 0 0 / 0.2);
  }

  .terminal-light-amber {
    @apply bg-[#f3bb4a];
    box-shadow: 0 0 6px rgb(243 187 74 / 0.3), inset 0 -1px 2px rgb(0 0 0 / 0.2);
  }

  .terminal-light-green {
    @apply bg-[#3dcf88];
    box-shadow: 0 0 6px rgb(61 207 136 / 0.3), inset 0 -1px 2px rgb(0 0 0 / 0.2);
  }

  .terminal-title {
    @apply mb-0 text-[0.72rem] text-mission-muted;
  }

  .terminal-state {
    @apply ml-auto mb-0 rounded-full border border-brand/30 px-2.5 py-1 font-mono text-[0.68rem] uppercase tracking-[0.1em] text-brand;
    background: linear-gradient(135deg, rgb(91 176 255 / 0.12), rgb(44 142 255 / 0.06));
    box-shadow: 0 0 10px rgb(91 176 255 / 0.1);
  }

  .terminal-state.is-complete {
    @apply border-[#3dcf88]/30 text-[#9bf0c7];
    background: linear-gradient(135deg, rgb(61 207 136 / 0.12), rgb(61 207 136 / 0.06));
    box-shadow: 0 0 10px rgb(61 207 136 / 0.1);
  }

  .terminal-viewport {
    @apply m-0 h-[260px] max-w-full flex-1 select-text overflow-x-auto overflow-y-scroll rounded-xl border border-white/[0.06] p-5 text-[0.82rem] leading-7 text-mission-text lg:h-auto;
    background: linear-gradient(180deg, rgb(13 26 48 / 0.98), rgb(8 19 37 / 0.95));
    white-space: pre;
    scrollbar-gutter: stable;
    box-shadow: inset 0 2px 8px rgb(0 0 0 / 0.3);
  }

  .terminal-viewport::after {
    content: '';
    @apply pointer-events-none fixed inset-0 opacity-[0.015];
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgb(255 255 255 / 0.03) 2px,
      rgb(255 255 255 / 0.03) 4px
    );
  }

  .terminal-viewport code {
    @apply border-0 bg-transparent p-0 text-inherit;
  }

  .terminal-cursor {
    @apply ml-0.5 inline-block h-[1rem] w-[0.55rem] translate-y-[0.15rem] rounded-sm bg-brand;
    box-shadow: 0 0 8px rgb(91 176 255 / 0.5);
    animation: terminal-blink 1s steps(1) infinite;
  }

  .terminal-cursor.is-hidden {
    @apply hidden;
  }

  .terminal-hint {
    @apply m-0 text-[0.75rem] text-mission-muted/60;
  }

  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* ── Grids ─────────────────────────────────────────────── */

  .feature-grid {
    @apply mt-8 grid grid-cols-1 gap-5 md:grid-cols-2;
  }

  .roadmap-grid {
    @apply mt-6 grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4;
  }

  .split,
  .post-grid,
  .docs-grid {
    @apply grid grid-cols-1 gap-5 md:grid-cols-2;
  }

  /* ── Steps / Timeline ──────────────────────────────────── */

  .steps {
    @apply m-0 mt-8 grid list-none gap-0 p-0;
  }

  .steps li {
    @apply relative pl-10 pb-8;
  }

  .steps li::before {
    content: '';
    @apply absolute left-[0.85rem] top-[2rem] bottom-0 w-px;
    background: linear-gradient(180deg, rgb(91 176 255 / 0.3), rgb(91 176 255 / 0.05));
  }

  .steps li:last-child::before {
    @apply hidden;
  }

  .steps li::after {
    content: '';
    @apply absolute left-2 top-[0.45rem] h-3 w-3 rounded-full border-2 border-brand bg-mission-bg;
    box-shadow: 0 0 8px rgb(91 176 255 / 0.3);
  }

  .steps li h3 {
    @apply text-mission-text;
  }

  .steps li p {
    @apply mt-1 text-mission-muted;
  }

  /* ── Page elements ─────────────────────────────────────── */

  .page-header {
    @apply pb-6 pt-14;
  }

  .meta {
    @apply text-[0.92rem] text-mission-muted;
  }

  .tech-label {
    @apply font-mono uppercase tracking-[0.08em];
  }

  .content {
    @apply pb-16;
  }

  .content article {
    @apply max-w-[76ch];
  }

  .content h1,
  .content h2,
  .content h3 {
    @apply mt-[1.4rem];
  }

  .docs-sections {
    @apply grid gap-5;
  }

  .docs-layout {
    @apply grid grid-cols-1 items-start gap-4 lg:grid-cols-[300px_minmax(0,1fr)];
  }

  .docs-sidebar {
    @apply lg:sticky lg:top-[88px];
  }

  .docs-sidebar h2 {
    font-size: 1.1rem;
  }

  .docs-sidebar h3 {
    @apply mt-4 text-[0.9rem] uppercase tracking-[0.06em] text-mission-muted;
  }

  .docs-sidebar ul,
  .link-list {
    @apply m-0 list-none p-0;
  }

  .docs-sidebar li {
    @apply my-[0.35rem];
  }

  .docs-sidebar a {
    @apply text-mission-muted no-underline transition-colors duration-200;
  }

  .docs-sidebar a.active,
  .docs-sidebar a:hover {
    @apply text-mission-text;
  }

  .toc-link {
    @apply block;
  }

  .toc-link.depth-3 {
    @apply pl-[0.7rem] text-[0.95rem];
  }

  .link-list li {
    @apply py-[0.35rem];
  }

  .pagination {
    @apply mt-4 flex flex-wrap items-center justify-between gap-4;
  }

  .pagination ul {
    @apply m-0 flex list-none flex-wrap gap-2 p-0;
  }

  .pagination a,
  .pagination span[aria-current='page'] {
    @apply inline-block min-w-8 rounded-lg border border-mission-border px-[0.55rem] py-[0.2rem] text-center no-underline;
  }

  .pagination span[aria-current='page'] {
    @apply border-brand-strong bg-brand-strong text-white;
  }

  /* ── Footer ────────────────────────────────────────────── */

  .site-footer {
    @apply relative border-t border-white/[0.06] py-8;
  }

  .site-footer::before {
    content: '';
    @apply pointer-events-none absolute inset-x-0 -top-px h-px;
    background: linear-gradient(90deg, transparent, rgb(91 176 255 / 0.2), transparent);
  }

  .footer-inner {
    @apply flex flex-wrap justify-between gap-4 text-[0.92rem] text-mission-muted/70;
  }

  /* ── Main + ambient effects ────────────────────────────── */

  .mission-main {
    @apply relative;
  }

  .mission-main::before {
    content: '';
    @apply pointer-events-none absolute inset-0 opacity-[0.03];
    background-image:
      linear-gradient(rgb(184 196 217 / 0.6) 1px, transparent 1px),
      linear-gradient(90deg, rgb(184 196 217 / 0.6) 1px, transparent 1px);
    background-size: 64px 64px;
    mask-image: radial-gradient(ellipse 70% 50% at 50% 30%, black, transparent);
  }

  /* ── Glow orbs (ambient decoration) ────────────────────── */

  .glow-orb {
    @apply pointer-events-none absolute rounded-full;
    filter: blur(80px);
  }

  .glow-orb-1 {
    @apply -right-32 -top-32 h-96 w-96;
    background: radial-gradient(circle, rgb(91 176 255 / 0.12), transparent 70%);
    animation: float-glow 8s ease-in-out infinite;
  }

  .glow-orb-2 {
    @apply -left-24 top-1/2 h-80 w-80;
    background: radial-gradient(circle, rgb(44 142 255 / 0.08), transparent 70%);
    animation: float-glow 10s ease-in-out infinite reverse;
  }

  .glow-orb-3 {
    @apply -bottom-20 right-1/4 h-72 w-72;
    background: radial-gradient(circle, rgb(91 176 255 / 0.06), transparent 70%);
    animation: float-glow 12s ease-in-out infinite 2s;
  }

  /* ── Section headings ──────────────────────────────────── */

  .section-heading {
    @apply mb-2;
    background: linear-gradient(135deg, #e7edf7 0%, #b8c4d9 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .section-lead {
    @apply max-w-[58ch] text-mission-muted;
  }

  /* ── Feature card icon accent ──────────────────────────── */

  .feature-icon {
    @apply mb-3 flex h-10 w-10 items-center justify-center rounded-xl text-lg;
    background: linear-gradient(135deg, rgb(91 176 255 / 0.15), rgb(44 142 255 / 0.08));
    border: 1px solid rgb(91 176 255 / 0.15);
    box-shadow: 0 0 16px rgb(91 176 255 / 0.08);
  }

  /* ── Reveal animation ──────────────────────────────────── */

  .reveal {
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease-out, transform 0.6s ease-out;
  }

  .reveal.is-visible {
    opacity: 1;
    transform: translateY(0);
  }

  .reveal-delay-1 { transition-delay: 0.1s; }
  .reveal-delay-2 { transition-delay: 0.2s; }
  .reveal-delay-3 { transition-delay: 0.3s; }
  .reveal-delay-4 { transition-delay: 0.4s; }
}

@layer utilities {
  @keyframes terminal-blink {
    0%,
    49% {
      opacity: 1;
    }

    50%,
    100% {
      opacity: 0;
    }
  }

  @keyframes float-glow {
    0%, 100% {
      transform: translate(0, 0) scale(1);
      opacity: 0.7;
    }
    50% {
      transform: translate(20px, -30px) scale(1.1);
      opacity: 1;
    }
  }

  @keyframes pulse-dot {
    0%, 100% {
      opacity: 1;
      transform: scale(1);
    }
    50% {
      opacity: 0.5;
      transform: scale(0.8);
    }
  }

  @keyframes gradient-shift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  @media (prefers-reduced-motion: reduce) {
    .terminal-cursor {
      animation: none;
      opacity: 0;
    }

    .reveal {
      opacity: 1;
      transform: none;
      transition: none;
    }

    .glow-orb {
      animation: none;
    }

    .eyebrow::before {
      animation: none;
    }
  }

  @media (max-width: 900px) {
    .terminal-shell {
      @apply h-auto;
    }

    .terminal-viewport {
      @apply h-[240px];
    }

    .brand-mark {
      @apply hidden;
    }

    .nav-list {
      @apply gap-2 text-[0.9rem];
    }
  }
}
