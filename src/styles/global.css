@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply box-border;
  }

  body {
    @apply m-0 bg-mission-bg font-sans text-mission-text leading-relaxed;
    background-image:
      radial-gradient(circle at 15% -10%, rgb(91 176 255 / 0.14), transparent 28rem),
      radial-gradient(circle at 85% 0%, rgb(44 142 255 / 0.1), transparent 30rem);
  }

  a {
    @apply text-brand;
  }

  h1,
  h2,
  h3 {
    margin: 0 0 0.65rem;
    line-height: 1.2;
  }

  h1 {
    font-size: clamp(2rem, 4vw, 3.2rem);
  }

  h2 {
    font-size: clamp(1.4rem, 2.6vw, 2rem);
  }

  code {
    @apply rounded-lg border border-mission-border bg-mission-code px-1.5 py-[0.08rem] font-mono text-[0.92em];
  }

  pre {
    @apply overflow-x-auto rounded-[10px] border border-mission-border bg-mission-code p-[0.9rem] font-mono;
  }

  pre code {
    @apply border-0 bg-transparent p-0;
  }
}

@layer components {
  .container {
    @apply mx-auto w-[min(1120px,92vw)];
  }

  .site-header {
    @apply sticky top-0 z-10 border-b border-mission-border/90 backdrop-blur-xl;
    background: linear-gradient(180deg, rgb(8 19 37 / 0.88), rgb(8 19 37 / 0.76));
    box-shadow: 0 12px 36px rgb(4 12 24 / 0.28);
  }

  .header-inner {
    @apply flex min-h-[72px] items-center justify-between;
  }

  .brand {
    @apply flex items-center gap-3 text-mission-text no-underline font-bold tracking-[0.02em];
  }

  .brand-mark {
    @apply rounded-full border border-brand/40 bg-brand/10 px-2.5 py-1 text-[0.67rem] font-semibold tracking-[0.12em] text-brand;
  }

  .nav-list {
    @apply m-0 flex list-none gap-[1.2rem] p-0;
  }

  .nav-list a {
    @apply rounded-md px-2 py-1 text-mission-muted no-underline transition-colors;
  }

  .nav-list a.active,
  .nav-list a:hover {
    @apply bg-mission-panel/60 text-mission-text;
  }

  .section {
    @apply relative overflow-hidden py-[54px];
  }

  .section::before {
    content: '';
    @apply pointer-events-none absolute inset-0 opacity-20;
    background-image:
      linear-gradient(rgb(91 176 255 / 0.1) 1px, transparent 1px),
      linear-gradient(90deg, rgb(91 176 255 / 0.07) 1px, transparent 1px);
    background-size: 42px 42px;
    mask-image: linear-gradient(180deg, transparent, black 22%, black 78%, transparent);
  }

  .section-tight {
    @apply pb-10 pt-[72px];
  }

  .section.alt {
    @apply border-y border-mission-border bg-mission-bg-alt;
  }

  .hero-grid {
    @apply grid grid-cols-1 items-start gap-8 lg:grid-cols-[minmax(0,1fr)_auto];
  }

  .hero-grid.hero-grid-stacked {
    grid-template-columns: minmax(0, 1fr);
  }

  .hero-grid.hero-grid-stacked .terminal-shell {
    justify-self: stretch;
    margin-top: 0.5rem;
  }

  .eyebrow {
    @apply mb-2 text-xs font-semibold uppercase tracking-[0.08em] text-brand;
  }

  .lead {
    @apply max-w-[68ch] text-[1.08rem] text-mission-muted;
  }

  .lead.compact {
    @apply mt-0;
  }

  .cta-row {
    @apply mt-[1.6rem] flex flex-wrap gap-3;
  }

  .button {
    @apply inline-block rounded-[10px] border border-transparent px-4 py-[0.72rem] font-semibold no-underline transition-all;
  }

  .button.primary {
    @apply border-brand-strong bg-brand-strong text-white shadow-[0_10px_30px_rgb(44_142_255_/_0.28)] hover:-translate-y-px hover:bg-brand;
  }

  .button.secondary {
    @apply border-mission-border bg-mission-panel/30 text-mission-text hover:border-brand/40 hover:bg-mission-panel/55;
  }

  .card {
    @apply rounded-[14px] border border-mission-border/90 bg-mission-panel/70 p-[1.1rem] shadow-[inset_0_1px_0_rgb(255_255_255_/_0.04)] backdrop-blur-sm;
  }

  .card-elevated {
    @apply shadow-[0_18px_48px_rgb(4_12_24_/_0.33)];
  }

  .terminal-shell {
    @apply flex min-w-0 w-full flex-col gap-3 lg:h-[380px] lg:justify-self-end;
    inline-size: min(100%, calc((var(--terminal-max-ch, 88) * 0.7rem) + 2.4rem));
  }

  .terminal-header {
    @apply flex items-center gap-3;
  }

  .terminal-lights {
    @apply flex gap-1.5;
  }

  .terminal-light {
    @apply h-2.5 w-2.5 rounded-full;
  }

  .terminal-light-red {
    @apply bg-[#ff6b6b];
  }

  .terminal-light-amber {
    @apply bg-[#f3bb4a];
  }

  .terminal-light-green {
    @apply bg-[#3dcf88];
  }

  .terminal-title {
    @apply mb-0 text-[0.72rem] text-mission-muted;
  }

  .terminal-state {
    @apply ml-auto mb-0 rounded-full border border-brand/35 bg-brand/10 px-2 py-1 font-mono text-[0.7rem] uppercase tracking-[0.08em] text-brand;
  }

  .terminal-state.is-complete {
    @apply border-[#3dcf88]/40 bg-[#3dcf88]/10 text-[#9bf0c7];
  }

  .terminal-viewport {
    @apply m-0 h-[260px] max-w-full flex-1 select-text overflow-x-auto overflow-y-scroll rounded-xl border border-mission-border/90 bg-mission-code/95 p-4 text-[0.82rem] leading-6 text-mission-text lg:h-auto;
    white-space: pre;
    scrollbar-gutter: stable;
  }

  .terminal-viewport code {
    @apply border-0 bg-transparent p-0 text-inherit;
  }

  .terminal-cursor {
    @apply ml-0.5 inline-block h-[1rem] w-[0.55rem] translate-y-[0.15rem] bg-brand;
    animation: terminal-blink 1s steps(1) infinite;
  }

  .terminal-cursor.is-hidden {
    @apply hidden;
  }

  .terminal-hint {
    @apply m-0 text-[0.78rem] text-mission-muted;
  }

  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  .feature-grid,
  .roadmap-grid,
  .split,
  .post-grid,
  .docs-grid {
    @apply grid grid-cols-1 gap-4 md:grid-cols-2;
  }

  .steps {
    @apply m-0 grid gap-[0.9rem] pl-5;
  }

  .page-header {
    @apply pb-6 pt-12;
  }

  .meta {
    @apply text-[0.92rem] text-mission-muted;
  }

  .tech-label {
    @apply font-mono uppercase tracking-[0.08em];
  }

  .content {
    @apply pb-[54px];
  }

  .content article {
    @apply max-w-[76ch];
  }

  .content h1,
  .content h2,
  .content h3 {
    @apply mt-[1.4rem];
  }

  .docs-sections {
    @apply grid gap-5;
  }

  .docs-layout {
    @apply grid grid-cols-1 items-start gap-4 lg:grid-cols-[300px_minmax(0,1fr)];
  }

  .docs-sidebar {
    @apply lg:sticky lg:top-[88px];
  }

  .docs-sidebar h2 {
    font-size: 1.1rem;
  }

  .docs-sidebar h3 {
    @apply mt-4 text-[0.9rem] uppercase tracking-[0.06em] text-mission-muted;
  }

  .docs-sidebar ul,
  .link-list {
    @apply m-0 list-none p-0;
  }

  .docs-sidebar li {
    @apply my-[0.35rem];
  }

  .docs-sidebar a {
    @apply text-mission-muted no-underline;
  }

  .docs-sidebar a.active,
  .docs-sidebar a:hover {
    @apply text-mission-text;
  }

  .toc-link {
    @apply block;
  }

  .toc-link.depth-3 {
    @apply pl-[0.7rem] text-[0.95rem];
  }

  .link-list li {
    @apply py-[0.35rem];
  }

  .pagination {
    @apply mt-4 flex flex-wrap items-center justify-between gap-4;
  }

  .pagination ul {
    @apply m-0 flex list-none flex-wrap gap-2 p-0;
  }

  .pagination a,
  .pagination span[aria-current='page'] {
    @apply inline-block min-w-8 rounded-lg border border-mission-border px-[0.55rem] py-[0.2rem] text-center no-underline;
  }

  .pagination span[aria-current='page'] {
    @apply border-brand-strong bg-brand-strong text-white;
  }

  .site-footer {
    @apply border-t border-mission-border py-5 pb-7;
  }

  .footer-inner {
    @apply flex flex-wrap justify-between gap-4 text-[0.95rem] text-mission-muted;
  }

  .mission-main {
    @apply relative;
  }

  .mission-main::before {
    content: '';
    @apply pointer-events-none absolute inset-0 opacity-[0.06];
    background-image:
      linear-gradient(rgb(184 196 217 / 0.75) 1px, transparent 1px),
      linear-gradient(90deg, rgb(184 196 217 / 0.75) 1px, transparent 1px);
    background-size: 56px 56px;
  }
}

@layer utilities {
  @keyframes terminal-blink {
    0%,
    49% {
      opacity: 1;
    }

    50%,
    100% {
      opacity: 0;
    }
  }

  @media (prefers-reduced-motion: reduce) {
    .terminal-cursor {
      animation: none;
      opacity: 0;
    }
  }

  @media (max-width: 900px) {
    .terminal-shell {
      @apply h-auto;
    }

    .terminal-viewport {
      @apply h-[240px];
    }

    .brand-mark {
      @apply hidden;
    }

    .nav-list {
      @apply gap-3 text-[0.95rem];
    }
  }
}
